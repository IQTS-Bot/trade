<!DOCTYPE html>
<ht        function log(message) {
            console.log(message);
            document.getElementById('log').innerHTML += message + '<br>';
        }

        // Initialize chart on load
        window.onload = function() {
            createChart();
            setTimeout(addTestData, 1000); // Add test data after chart is created
        };
<head>
    <title>Candlestick Test</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        body { background: #1a1a2e; color: white; font-family: Arial; margin: 20px; }
        #chart { width: 600px; height: 400px; background: black; border: 2px solid #00ffaa; }
        button { background: #00ffaa; color: black; padding: 10px; margin: 5px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h1>TradingView Candlestick Test</h1>
    <div id="chart"></div>
    <div id="log"></div>

    <script>
        let chart = null;
        let candlestickSeries = null;

        function log(message) {
            console.log(message);
            document.getElementById('log').innerHTML += '<div>' + message + '</div>';
        }

        function createChart() {
            try {
                log('Creating chart...');
                log('LightweightCharts available: ' + (typeof LightweightCharts !== 'undefined'));
                
                const container = document.getElementById('chart');
                
                chart = LightweightCharts.createChart(container, {
                    width: 600,
                    height: 400,
                    layout: {
                        backgroundColor: '#000000',
                        textColor: '#ffffff',
                    },
                    grid: {
                        vertLines: { color: '#333' },
                        horzLines: { color: '#333' },
                    },
                });

                candlestickSeries = chart.addCandlestickSeries({
                    upColor: '#00FF00',
                    downColor: '#FF0000',
                    borderDownColor: '#FF0000',
                    borderUpColor: '#00FF00',
                    wickDownColor: '#FF0000',
                    wickUpColor: '#00FF00',
                });

                log('Chart created successfully!');
            } catch (error) {
                log('ERROR: ' + error.message);
            }
        }

        function addTestData() {
            if (!candlestickSeries) {
                log('ERROR: Chart not created yet');
                return;
            }

            try {
                const data = [
                    { time: '2024-01-01', open: 100, high: 120, low: 90, close: 110 },
                    { time: '2024-01-02', open: 110, high: 130, low: 100, close: 95 },
                    { time: '2024-01-03', open: 95, high: 115, low: 85, close: 105 },
                    { time: '2024-01-04', open: 105, high: 125, low: 95, close: 120 },
                ];

                candlestickSeries.setData(data);
                chart.timeScale().fitContent();
                
                log('Test data added successfully!');
            } catch (error) {
                log('ERROR adding data: ' + error.message);
            }
        }

        // Auto-test when page loads
        window.onload = function() {
            setTimeout(() => {
                createChart();
                setTimeout(() => {
                    addTestData();
                }, 1000);
            }, 1000);
        };
    </script>
</body>
</html>
